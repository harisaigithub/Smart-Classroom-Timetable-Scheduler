{% extends 'base1.html' %}
{% load i18n %}
{% block title %}Reset Credentials | Video Insights Detection AI{% endblock %}

{% block content %}
<div class="flex items-center justify-center py-24 px-4">
    <div class="max-w-md w-full space-y-8 bg-black/60 backdrop-blur-3xl p-10 rounded-[2.5rem] border border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] pulse-box">
        
        <div class="text-center">
            <div class="w-16 h-16 bg-black border border-[var(--accent-cyan)] rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-[0_0_20px_rgba(0,242,255,0.2)]">
                <i class="fa fa-key-skeleton text-2xl text-[var(--accent-cyan)]"></i>
            </div>
            <h1 class="orbitron text-2xl font-black text-white mb-2 tracking-tighter uppercase italic">
                New <span class="text-[var(--accent-cyan)]">Credentials</span>
            </h1>
            <p class="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-8">
                Re-configure your security access node
            </p>
        </div>

        <form method="post" class="space-y-6 mt-8" id="passwordForm">
            {% csrf_token %}

            <div class="space-y-5">
                <div class="relative group">
                    <i class="fa fa-lock absolute left-4 top-4 text-gray-600 group-focus-within:text-[var(--accent-cyan)] transition-colors"></i>
                    <input
                        type="password"
                        name="new_password1"
                        id="id_new_password1"
                        required
                        placeholder="{% translate 'New Security Key' %}"
                        class="w-full pl-12 pr-4 py-4 bg-white/5 border border-white/10 rounded-xl focus:border-[var(--accent-cyan)]/50 focus:ring-1 focus:ring-[var(--accent-cyan)]/30 outline-none font-medium text-white transition-all"
                    >
                </div>
                
                <div class="bg-black/40 p-5 rounded-2xl border border-white/5 shadow-inner">
                    <p class="text-[9px] font-black text-gray-600 uppercase tracking-widest mb-3">
                        {% translate "Security Protocol Status" %}
                    </p>
                    <ul class="text-[10px] font-black uppercase space-y-2">
                        <li id="length" class="text-gray-600 flex items-center gap-3 transition-colors">
                            <i class="fa fa-circle-check"></i>
                            {% translate "8+ Characters" %}
                        </li>
                        <li id="uppercase" class="text-gray-600 flex items-center gap-3 transition-colors">
                            <i class="fa fa-circle-check"></i>
                            {% translate "Uppercase Requirement" %}
                        </li>
                    </ul>
                </div>

                <div class="relative group">
                    <i class="fa fa-shield-halved absolute left-4 top-4 text-gray-600 group-focus-within:text-[var(--accent-cyan)] transition-colors"></i>
                    <input
                        type="password"
                        name="new_password2"
                        id="id_new_password2"
                        required
                        placeholder="{% translate 'Confirm Security Key' %}"
                        class="w-full pl-12 pr-4 py-4 bg-white/5 border border-white/10 rounded-xl focus:border-[var(--accent-cyan)]/50 focus:ring-1 focus:ring-[var(--accent-cyan)]/30 outline-none font-medium text-white transition-all"
                    >
                </div>
            </div>

            <button
                type="submit"
                id="submitBtn"
                class="w-full py-4 rounded-xl bg-white/5 text-gray-600 font-black uppercase tracking-[0.3em] text-[10px] transition-all cursor-not-allowed border border-white/5"
                disabled
            >
                {% translate "Re-configure Access Node" %}
            </button>
        </form>
    </div>
</div>

<script>
    const p1 = document.getElementById('id_new_password1');
    const p2 = document.getElementById('id_new_password2');
    const btn = document.getElementById('submitBtn');

    function validate() {
        const val = p1.value;
        const isLong = val.length >= 8;
        const hasUpper = /[A-Z]/.test(val);
        const matches = val === p2.value && val !== "";

        // Update indicator colors based on project accent (Cyan)
        document.getElementById('length').style.color = isLong ? '#00f2ff' : '#4b5563';
        document.getElementById('uppercase').style.color = hasUpper ? '#00f2ff' : '#4b5563';

        if (isLong && hasUpper && matches) {
            btn.disabled = false;
            btn.className = "glow-button w-full py-4 rounded-xl bg-[var(--accent-cyan)] text-black font-black uppercase tracking-[0.3em] text-[10px] cursor-pointer transition-all active:scale-95";
        } else {
            btn.disabled = true;
            btn.className = "w-full py-4 rounded-xl bg-white/5 text-gray-600 font-black uppercase tracking-[0.3em] text-[10px] cursor-not-allowed border border-white/5";
        }
    }

    p1.addEventListener('input', validate);
    p2.addEventListener('input', validate);
</script>
{% endblock %}