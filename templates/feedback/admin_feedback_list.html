{% extends 'base_dashboard.html' %}
{% block title %}Manage Feedback | Smart Scheduler{% endblock %}
{% block header_title %}User Change Requests{% endblock %}

{% block content %}
<div class="space-y-6 fade-in-up">
    <div class="flex justify-between items-center">
        <h2 class="font-display text-xl font-bold text-primary">System Feedback</h2>
    </div>

    <div class="bg-white rounded-[32px] border border-borderSubtle overflow-hidden shadow-sm">
        <table class="w-full text-left">
            <thead class="bg-bgSoft text-textGray text-[10px] font-bold uppercase tracking-widest">
                <tr>
                    <th class="px-8 py-5">Sender</th>
                    <th class="px-6 py-5">Issue/Subject</th>
                    <th class="px-6 py-5">Status</th>
                    <th class="px-6 py-5 text-right">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-borderSubtle">
                {% for feedback in feedbacks %}
                <tr class="hover:bg-bgSoft/30 transition-colors">
                    <td class="px-8 py-5">
                        <p class="text-sm font-bold text-textDark">{{ feedback.user.email }}</p>
                        <p class="text-[9px] text-textGray font-bold uppercase">{{ feedback.created_at|date:"D, d M" }}</p>
                    </td>
                    <td class="px-6 py-5">
                        <p class="text-sm font-medium text-textDark">{{ feedback.subject }}</p>
                        <p class="text-xs text-textGray truncate max-w-xs">{{ feedback.message }}</p>
                    </td>
                    <td class="px-6 py-5">
                        <span class="px-3 py-1 rounded-lg text-[9px] font-black uppercase 
                        {% if feedback.status == 'resolved' %}bg-green-100 text-green-700
                        {% elif feedback.status == 'pending' %}bg-amber-100 text-amber-700
                        {% else %}bg-blue-100 text-blue-700{% endif %}">
                            {{ feedback.get_status_display }}
                        </span>
                    </td>
                    <td class="px-6 py-5 text-right">
                        <button class="btn-glow bg-secondary text-white px-4 py-2 rounded-xl text-[10px] font-bold uppercase">
                            Resolve
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}